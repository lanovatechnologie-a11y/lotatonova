<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NOVA LOTTO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#0f1c2e;color:white;text-align:center}
.box{max-width:420px;margin:auto;background:white;color:black;border-radius:10px;padding:25px;margin-top:40px}
input{width:100%;padding:10px;margin-top:10px}
button{width:100%;padding:12px;background:#0b6cf5;color:white;border:none;margin-top:15px}
.error{background:#ffdddd;color:#a10000;padding:10px;margin-top:10px}
.success{background:#ddffdd;color:#0b6f00;padding:10px;margin-top:10px}
</style>
</head>
<body>

<div class="box">
<h2>NOVA LOTTO</h2>
<h4>Système de gestion multi-niveaux</h4>

<div id="msg"></div>

<input id="user" placeholder="Identifiant Master">
<input id="pass" type="password" placeholder="Mot de passe Master">

<button onclick="login()">Connexion Master</button>

</div>

<script>
async function login(){
  const username = document.getElementById("user").value.trim();
  const password = document.getElementById("pass").value.trim();
  const msg = document.getElementById("msg");

  msg.innerHTML = "";

  try{
    const res = await fetch("/api/master-login",{
      method:"POST",
      headers:{ "Content-Type":"application/json"},
      body:JSON.stringify({username,password})
    });

    const data = await res.json();

    if(!res.ok){
      msg.innerHTML = '<div class="error">'+data.message+'</div>';
      return;
    }

    msg.innerHTML = '<div class="success">Connexion réussie</div>';
    setTimeout(()=> window.location.href="master-dashboard.html",1500);

  }catch(e){
    msg.innerHTML = '<div class="error">Erreur de connexion serveur</div>';
  }
}
</script>

</body>
</html>